<div class="Code-run">
  <svelte:component this="{Example}" name="example" />
</div>

<script>
  export default {

    async oncreate() {
      const { params: { slug } } = this.get();
      console.log(slug);
      await fetch(`api/components/${slug.toLowerCase()}`)
        .then(r => r.json())
        .then(async manifest => {
          const docs = manifest && manifest.docs

          import(
            `@components/${(manifest.docs.examples &&
              manifest.docs.examples[0] &&
              manifest.docs.examples[0].filePath) ||
              manifest.info.slug.concat('/example/Example.html')}`
          )
            .then(mod => {
              this.set({ Example: mod.default })
            })
            .catch(() => null)
        })
        .catch(() => null)
        .finally(() => this.set({isLoading: false}))
    },
  }
</script>

<style>
  :global(.Code-run .container) {
    margin: 0 !important;
    width: 100% !important;
    min-height: 100vh;
    padding: 24px 16px;
  }
</style>
